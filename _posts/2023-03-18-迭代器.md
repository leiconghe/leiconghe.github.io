---
layout: post
title: "C++ STL 迭代器"
description: "关于C++标准库中迭代器的学习与总结"
date: 2023-03-18
tags: C++
color: 'rgb(54,133,255)'
cover: '../assets/test.png'
---

# C++ STL 迭代器

常见的迭代器分为：

1. 前向迭代器（Forward Iterator）

   假设p是一个迭代器，则p支持`++p`或`p++`，`*p`操作，还可以被复制或赋值，可以用`==`或`!=`运算符进行比较。

2. 双向迭代器（Bidirectional Iterator）

   指除了前向迭代，还具备正向迭代的功能，如`p--`或`--p`操作。

3. 随机访问迭代（Random Access Iterator）

   假设p是一个随机迭代访问器，i为整形变量，则：

   * p+=i、p-=i、p+i、p-i：移动i个元素/第i个元素的迭代器
   * p[i]:返回p后面第i个元素的引用

## 迭代器的定义方式

| 迭代器的定义方式 | 具体格式                                    |
| ---------------- | ------------------------------------------- |
| 正向迭代器       | `容器类名::iterator 迭代器名`               |
| 常量正向迭代器   | `容器类名::const_iterator 迭代器名`         |
| 反向迭代器       | `容器类名::reverse_iterator 迭代器名`       |
| 常量反向迭代器   | `容器类名::const_reverse_iterator 迭代器名` |

* 对正向迭代器进行++操作，迭代器会指向容器中的后一个元素
* 对反向迭代器进行++操作，迭代器会指向容器中的前一个元素

```c++
#include <iostream>
#include <vector>
using namespace std;
int main(){
    vector<int> v{1,2,3,4,5,6,7};
    vector<int>::iterator v_i;
    for(v_i = v.begin(); v_i != v.end(); ++i){
        //for(v_i = v.begin(); v_i < v.end(); ++i)
        cout<<*v_i<<" ";
    }
}
```

list容器是的迭代器是双向迭代器：

```c++
list<int> v;
list<int>::const_iterator v_i;
//...
//以下代码是不合法的，双向迭代器不能用"<"进行比较
for(v_i = v.begin(); v_i < v.end(); ++i);
//以下代码也不合法，因为双向迭代器不支持随机访问
for(int i = 0; i < v.size(); ++i){
    cout<<v[i];
}
//以下代码是合法的
for(v_i = v.begin(); v_i != v.end(); ++i)
    cout<<*i;
```

## C++11容器指定使用迭代器类型

| 容器                               | 对应的迭代器类型 |
| ---------------------------------- | ---------------- |
| array                              | 随机访问迭代器   |
| vector                             | 随机访问迭代器   |
| deque                              | 随机访问迭代器   |
| list                               | 双向迭代器       |
| set / multiset                     | 双向迭代器       |
| map / multimap                     | 双向迭代器       |
| forward_list                       | 前向迭代器       |
| unordered_map / unordered_multimap | 前向迭代器       |
| unordered_set / unordered_multiset | 前向迭代器       |
| stack                              | 不支持迭代器     |
| queue                              | 不支持迭代器     |

==**特别注意，除了随机访问迭代器，其它迭代器都只能++p或--p，不能p+i**==

==**运算符+/-、+=/-=这四种，只支持基础迭代器为随机访问迭代器，比如list就不行**==

==**运算符[n]可以用于反向、正向迭代器，访问相距n个位置处的元素，注意向前还是向后，确定迭代器类型**==

```c++
std::vector<int> myvector{1,2,3,4,5,6,7};
std::reverse_iterator<std::vector<int>::iterator> my_reverse(myvector.rbegin());	//指向7
cout<<*my_reverse<<endl;		//7
cout<<*（my_reverse+3); 			//4
cout<<my_reverse[4];			//3
```

